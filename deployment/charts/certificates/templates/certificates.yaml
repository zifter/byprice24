{{- range .Values.certificates }}
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: {{ .secretName }}-certificate
  namespace: {{ $.Release.Namespace }}
spec:
  secretName: {{ .secretName }}
  dnsNames:
{{- range $dnsName := .dnsNames | required "dnsNames is not defined"}}
    - {{ $dnsName }}
{{- end }}
  usages:
    - digital signature
    - key encipherment
  issuerRef:
    name: {{ .issuer }}
    kind: Issuer
    group: cert-manager.io
{{ end }}
